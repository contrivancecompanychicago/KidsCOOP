 {% extends "global/Page.html" %}
{% load staticfiles otree %}

{% block styles %}
<link href="{% static "public_good_kids/css/ActualGame.css" %}" rel="stylesheet" />
{% endblock %}

{% block content %}
{% include "StandardArea.html" %}
{% include "HiddenInput.html" %}
{% include "Timer.html" %}
{% endblock %}

{% block scripts %}
<script src="{% static "public_good_kids/js/Confirm.js" %}"></script>
<script src="{% static "public_good_kids/js/MoveCoins.js" %}"></script>
<script src="{% static "public_good_kids/js/Timer.js" %}"></script>
<script type="text/javascript">
document.getElementById('arrow-up').addEventListener("click", function() {moveToMain(moveAll=true, kStrategy=true);});
document.getElementById('arrow-down').addEventListener("click", function() {moveToOwn(moveAll=true, kStrategy=true);});
window.onload = initialize();


function initialize() {
	// starts audio, timer and sets arrows in place
	// also needed to initialize global variables
	try {
		document.getElementById("timeleft").style.visibility = 'visible';
		if (typeof coinCountdown === 'undefined') {
			var audio = new Audio('../../../../../static/public_good_kids/K0_strategy_v2.mp3');
		  audio.play();

			setTimeout(distributeOtherCoins, 20000);
			setTimeout(showArrows, 38500);
			function showArrows() {
				// make arrows visible
				var arrows = document.getElementsByClassName('arrow');
				var i;
				for (i=0; i < arrows.length; i++) {
					arrows[i].style.visibility = 'visible';
				}
			}

      // start timer
      setTimeout(decreaseTimer, 38500);

			// coin countdown to indicate if all coins are distributed
			coinCountdown = 1;

			// keep track of player's contribution
			contribution = 0;
		}

	}
	catch(err) {
	}
}

function distributeOtherCoins() {
	var cl1 = document.getElementById('cl1');
	var cl2 = document.getElementById('cl2');
	var cl3 = document.getElementById('cl3');
	var cl4 = document.getElementById('cl4');
	var cl5 = document.getElementById('cl5');
	var ct1 = document.getElementById('ct1');
	var ct2 = document.getElementById('ct2');
	var ct3 = document.getElementById('ct3');
	var ct4 = document.getElementById('ct4');
	var ct5 = document.getElementById('ct5');
	var cr1 = document.getElementById('cr1');
	var cr2 = document.getElementById('cr2');
	var cr3 = document.getElementById('cr3');
	var cr4 = document.getElementById('cr4');
	var cr5 = document.getElementById('cr5');

	ct1.classList.remove("rotatedcoin");
	ct2.classList.remove("rotatedcoin");
	ct3.classList.remove("rotatedcoin");
	ct4.classList.remove("rotatedcoin");
	ct5.classList.remove("rotatedcoin");

	cl1.style.left = '2.5%';
	cl2.style.left = '6.5%';
	cl3.style.left = '10.5%';
	cl4.style.left = '14.5%';
	cl5.style.left = '18.5%';
	cl1.style.top = '55%';
	cl2.style.top = '55%';
	cl3.style.top = '55%';
	cl4.style.top = '55%';
	cl5.style.top = '55%';

	ct1.style.left = '40%';
	ct2.style.left = '44%';
	ct3.style.left = '48%';
	ct4.style.left = '52%';
	ct5.style.left = '56%';
	ct1.style.top = '18%';
	ct2.style.top = '18%';
	ct3.style.top = '18%';
	ct4.style.top = '18%';
	ct5.style.top = '18%';

	cr1.style.left = '93.5%';
	cr2.style.left = '89.5%';
	cr3.style.left = '85.5%';
	cr4.style.left = '81.5%';
	cr5.style.left = '77.5%';
	cr1.style.top = '55%';
	cr2.style.top = '55%';
	cr3.style.top = '55%';
	cr4.style.top = '55%';
	cr5.style.top = '55%';
}

</script>
{% endblock %}
